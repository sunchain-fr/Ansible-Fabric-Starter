---
#
# hosts.yml configuration draft for adding new org (org5)
# to running network brought by ansible-fabric-starter.
#
# This is the hosts_raft.yml
# modifyed example, to show how to add new orgs..
#

all:
  hosts:
    localhost: # localhost connection parameters, used for storing configuration while transferring it between nodes
      ansible_connection: local
  vars:
    global_domain: sunchain.io
    global_chaincode_lang: golang # Programming language of chaincode
    global_chaincode_version: 1.0.0 # Your chaincode version
    global_channels:
      - name: common # Channel name
        particapants: # Organizations, should be included in channel
          - soliha
        chaincode: # Chaincode params
          name: main
          version: "{{ global_chaincode_version }}"
          policy: ""
          init: '{"Args":["GetMeasuresBetween","2019-03-29T12:00:00Z", "2019-03-29T14:00:00Z"]}'
      - name: ekate # Channel name
        particapants: # Organizations, should be included in channel
          - ekate
        chaincode: # Chaincode params
          name: main
          version: "{{ global_chaincode_version }}"
          policy: ""
          init: '{"Args":["GetMeasuresBetween","2019-03-29T12:00:00Z", "2019-03-29T14:00:00Z"]}'

    #
    # Completly new channels should be defined to the system in new_channels variable.
    #

    new_channels:
      - name: estia # Channel name
        particapants: # Organizations, should be included in channel
          - estia
        chaincode: # Chaincode params
          name: main
          version: "{{ global_chaincode_version }}"
          policy: ""
          init: '{"Args":["GetMeasuresBetween","2019-03-29T12:00:00Z", "2019-03-29T14:00:00Z"]}'

    ############

    ############

    orderer_count: 3 # Leave untouched, we do not support orderer scaling yet.
    newcomers: yes # Define a newcomers flag, to pass safety check.

    ############

  children:
    nodes:
      hosts:
        soliha.sunchain.io: # Describes which containers will run on this node
          node_roles:
            - root_orderer # This node will be used to generate crypto-config for other orderers
            - orderer # This node will host an orderer-service
            - peer # This node will host peers and api containers for organization
            - root_peer # This node will be used to create channels and instantiate chaincode
            - explorer # This node will serve hyperledger fabric explorer
          org: soliha # Organization name
          orderer_id: 0
          ansible_host: 18.212.147.220 # Real ip address or domain name of the machine
          ansible_user: ubuntu  # User with sudo access
          #ansible_private_key_file: ~/path-to-private-key # Private key to identify ourselves
          ansible_ssh_port: 22 # Specify ssh-port here, if case of it's not defaulted.
        # Same structure for any other nodes
        ekate.sunchain.io:
          node_roles:
            - orderer # This node will host an orderer-service
            - peer # This node will host peers and api containers for organization
            - explorer
          org: ekate
          orderer_id: 1 # ID of orderer-service which is running on this host
          ansible_host: 54.211.182.66
          ansible_user: ubuntu
          #ansible_private_key_file: ~/path-to-private-key
          ansible_ssh_port: 22
        estia.sunchain.io:
          node_roles:
            - orderer
            - peer
            - explorer
          org: estia
          orderer_id: 2
          ansible_host: 3.81.75.88
          ansible_user: ubuntu
          #ansible_private_key_file: ~/path-to-private-key
          ansible_ssh_port: 22
        org3.sunchain.io: # This node will host only kafka-broker and peer.
          node_roles:
            - peer
            - orderer
            - explorer
          org: org3
          orderer_id: 3
          ansible_host: 23.20.192.198
          ansible_user: ubuntu
          #ansible_private_key_file: ~/path-to-private-key
          ansible_ssh_port: 22


#
#   New organization defined as usual, but with a newcomer role:
#

###########

        org4.sunchain.io:
          node_roles:
            - peer
            - newcomer # Add a 'newcomer' role to each new org.
          org: org4
          orderer_id: 0
          ansible_host: 54.197.194.21
          ansible_user: ubuntu
          ansible_ssh_port: 22


###########
